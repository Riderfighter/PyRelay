import binascii
import struct
import byteio
from Crypto.Cipher import ARC4

# encryptkey = b'6a39570cc9de4ec71d64821894c79332b197f92ba85ed281a023'
# decryptkey = b'6a39570cc9de4ec71d64821894c79332b197f92ba85ed281a023'

def test():
    # decrypt_key = b'72c5583cafb6818995cdd74b80'
    # cipher = ARC4.new(binascii.unhexlify(decrypt_key))
    # failure_packet = b's \xb4;\xc6\x90\x0f\xd4\xf4k\xe1s\xc8\x81\xa53\xe8\xbei-\xed\xa2IZCd\x00\x00\x00\x12\x00P\xcb\x84\x9b\x11,(\xf4:\xa9>\x0f\xbc\xff'
    cipher = ARC4.new(binascii.unhexlify(b'6a39570cc9de4ec71d64821894c79332b197f92ba85ed281a023'))

    hello_packet = b'\x00\x00\x01\x98gd\xb9\xb5\x96LY \xba\xf3\t%\x86\xf6\xedF^\xdd\x96\x8b\x9dv\x168.U|0*\x91\xa9lL4\xf0\xde\x16\xe2E\x08\x8e\x12\xd9t\xb2\x0c\xe6\xf2\xd7<\xc0\xdd\xa8(\xbcV\xa7\xcaC\x9a\xe17\xfeU\xbb\xea=\xad\xfd>e\xb6\x85U=x\x87)\\\xd7\\Y+\x97)\xdb~\xe3`\xa9+K:\xabd~Eg\xfcs\x19#\x1c?\xebGMUf\x8a\xb4\xc9\xddb@\x9a\x00\xf2\xd5\xf3sr\xe2\xad\xfb^\xcem\x00\xbd\xd0\xfd\\\x02Y\xdb}\xa1\x98\xff\xbal\xcf&\xc8\xa2K\x05\xfa\x0cg\xfdKD\xba\x992]V\xabl\xe8\xf8\x0fP2\xbap\xac\x08\xb9\x05\xaf\x89\x99\x9a\x1d\xc4z\xed-\'\x96V&\x98[g\xe1\xc0i\xf5\xa0@\r\xa5c\xc1v\xdahy\x99\x02-\xc3M\xf0\xf7\x03\xff\xeaLb!V\x04\xe61\xb3lN&\xe2\\\xea!_?\xe7?\x1b\x90<\xe2\x8e\x8d\x83\x04\xfc#\xdc\x12\xb7\x90E\xe37=\x19\x83\x0e\xe4\xe8j\'\xc4\xa6\xfe\x1e8\x8b\x03,\xb2\xf7 \xce\xd2\x1e{\x00\x830\xb2h\x1ce"!<n\xc7\x0fS\x1f$\x85\xb1\xd4~\x9bg\xd4(\xb9\x02\xded\xf4\x8c\xf9\xd0t\xc87\xaa \xf8\xbd!O\xf8\xd5(\xebT\xd7\x1d\xd3\xa2E\xc0\xf9\x0f\xdd\xf1\x11\xb2\xeaIF\x93b\xc2\x9e\x7f\xfb\xcf\xf8d\xd3kQ\x83\x1e\x9b\xae\xdbV\xbc##\xac\x9aU\xa0\\\xa6]\xa5\\\xc4\xea\x83O;\x89U\x90p\xb1\xe0\xabF\xc0\xbe\xf6wd\xbd_\x86\xdd\x89\xadA\x16\xba=\x88\xb5\xf1\x87\xf5\xb5S\xdb\xf3\x08\xc0\xc9C\x81'
    # print(hello_packet[5:])
    
    print(cipher.decrypt(hello_packet[5:]))
    return cipher.decrypt(hello_packet[5:])
# print(cipher.decrypt(failure_packet))
# test()
# print(cipher.decrypt(binascii.hexlify(encryptedbytes[5:])))